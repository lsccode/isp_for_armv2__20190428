#-----------------------------------------------------------------------------
#   The confidential and proprietary information contained in this file may
#   only be used by a person authorised under and to the extent permitted
#   by a subsisting licensing agreement from ARM Limited or its affiliates.
#
#          (C) COPYRIGHT 2018 - 2019 ARM Limited or its affiliates
#              ALL RIGHTS RESERVED
#
#   This entire notice must be reproduced on all copies of this file
#   and copies of this file may only be made by a person if such person is
#   permitted to do so under the terms of a subsisting license agreement
#   from ARM Limited or its affiliates.
#-----------------------------------------------------------------------------

#
# autogenerated makefile
# please do not edit
#

SYSTEM ?= linux

override MAKEPARAMS = SYSTEM=$(SYSTEM)

ifeq ($(TOOLCHAIN),)

GCC ?= $(shell which gcc)
GXX ?= $(shell which g++)
GST ?= $(shell which strip)
GAR ?= $(shell which ar)
GLD ?= $(shell which ld)
GNM ?= $(shell which nm)
GOC ?= $(shell which objcopy)
GOD ?= $(shell which objdump)
GRL ?= $(shell which ranlib)

else

ifeq ($(TRIPLET),)
$(error TRIPLET variable must be provided)
endif

override MAKEPARAMS += TRIPLET=$(TRIPLET)

GCC ?= $(TOOLCHAIN)/bin/$(TRIPLET)-gcc
GXX ?= $(TOOLCHAIN)/bin/$(TRIPLET)-g++
GST ?= $(TOOLCHAIN)/bin/$(TRIPLET)-strip
GAR ?= $(TOOLCHAIN)/bin/$(TRIPLET)-ar
GLD ?= $(TOOLCHAIN)/bin/$(TRIPLET)-ld
GNM ?= $(TOOLCHAIN)/bin/$(TRIPLET)-nm
GOC ?= $(TOOLCHAIN)/bin/$(TRIPLET)-objcopy
GOD ?= $(TOOLCHAIN)/bin/$(TRIPLET)-objdump
GRL ?= $(TOOLCHAIN)/bin/$(TRIPLET)-ranlib

endif

override MAKEPARAMS += GCC=$(GCC)
override MAKEPARAMS += GXX=$(GXX)
override MAKEPARAMS += GST=$(GST)
override MAKEPARAMS += GAR=$(GAR)
override MAKEPARAMS += GLD=$(GLD)
override MAKEPARAMS += GNM=$(GNM)
override MAKEPARAMS += GOC=$(GOC)
override MAKEPARAMS += GOD=$(GOD)
override MAKEPARAMS += GRL=$(GRL)

override APPTARGET = act-server

override LIBRARIES = 
override LIBRARIES += libevent

override CFGTARGETS = configure-libevent
override BLDTARGETS = build-libevent

override BUILDDIRS  = $(addsuffix /build, $(LIBRARIES))
override BUILDDIRS += $(APPTARGET)/build

all: build-$(APPTARGET)
	cp -R act-client/content act-server/build
	@echo "completed"

build-$(APPTARGET): $(APPTARGET) $(CFGTARGETS) $(BLDTARGETS)
	$(MAKE) --directory=$< $(MAKEPARAMS)

configure-libevent: libevent
	$(MAKE) --directory=$< -f configure.make $(MAKEPARAMS)

build-libevent: libevent
	$(MAKE) --directory=$< $(MAKEPARAMS)

.PHONY: clean build-$(APPTARGET) $(CFGTARGETS) $(BLDTARGETS)

clean:
	rm -rf $(BUILDDIRS)

